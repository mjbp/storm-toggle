!function(t,i){"object"==typeof exports?module.exports=i():t.StormToggle=i()}(this,function(){"use strict";function t(t,s){var a=[].slice.call(document.querySelectorAll(t));return 0===a.length?void console.warn("Toggle cannot be initialised, no elements found"):i=a.map(function(t){return Object.assign(Object.create(n),{node:t,settings:Object.assign({},e,s)}).init()})}var i=[],s=["click","keydown"],e={delay:200,targetLocal:!1,callback:null},n={init:function(){return this.togglers=this.node.getAttribute("data-toggle")&&[].slice.call(document.querySelectorAll("."+this.node.getAttribute("data-toggle"))),this.togglers?(this.open=!1,this.classTarget=this.settings.targetLocal?this.node.parentNode:document.documentElement,this.statusClass=this.settings.targetLocal?"active":["on--",this.node.getAttribute("id")].join(""),this.animatingClass=this.settings.targetLocal?"animating":["animating--",this.node.getAttribute("id")].join(""),this.initAria(),void this.togglers.forEach(function(t){s.forEach(function(i){t.addEventListener(i,function(t){this.toggle.call(this,t)}.bind(this),!1)}.bind(this))}.bind(this))):void console.warn("Toggle cannot be initialised, no triggers found")},initAria:function(){this.togglers.forEach(function(t){STORM.UTILS.attributelist.set(t,{role:"button","aria-controls":this.node.getAttribute("id"),"aria-expanded":"false"})}.bind(this))},toggleAttributes:function(){this.open=!this.open,this.togglers.forEach(function(t){STORM.UTILS.attributelist.toggle(t,"aria-expanded")})},toggleDocumentState:function(){this.classTarget.classList.remove(this.animatingClass),this.classTarget.classList.toggle(this.statusClass)},toggle:function(t){var i=this.classTarget.classList.contains(this.statusClass)?this.settings.delay:0;t&&(t.preventDefault(),t.stopPropagation()),this.classTarget.classList.add(this.animatingClass),window.setTimeout(function(){this.toggleAttributes(),this.toggleDocumentState(),!!this.settings.callback&&"function"==typeof this.settings.callback&&this.settings.callback.call(this)}.bind(this),i)}};return{init:t}});